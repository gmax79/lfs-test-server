git-lfs-authenticate
====================

This command should be callable via SSH on your Git server to enable Large File Support. It integrates well with Gitolite, uses SSH for authentication and Gitolite for authorization. Afterwards, a signed JSON Web token is generated that can be used in a patched git-lfs/lfs-test-server instance to verify the user.

## Config

The config file is a JSON file and must be placed at `$HOME/.git-lfs-authenticate`. Here is an example:

    {
      "secret": "/oPKhrx05/QOKt1VlJTTeqs3QZZBZcXbw6c1A0iMCDg=",
      "href": "http://localhost:9999/foo/"
    }

The secret is a base64 encoded random sequence (generated by `openssl rand -base64 32`) that is used to sign JWT tokens used to authenticate at a patched `git-lfs/lfs-test-server` instance. HRef just is the base URL of the LFS service.

## Installation: Gitolite

To integrate the command into gitolite follow the following steps:

1) Configure `LOCAL_CODE` inside your `gitolite.rc`, for example:

    LOCAL_CODE => "$ENV{HOME}/gitolite-local"

2) Copy the binary into a commands subfolder, in this case:

    $HOME/gitolite-local/commands/git-lfs-authenticate

3) Add `'git-lfs-authenticate'` to the `ENABLE` list inside your `gitolite.rc`

## Testing

Make sure `git-lfs-authenticate` is callable via SSH:

    ssh christoph@127.0.0.1 git-lfs-authenticate myrepo upload
